!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.retinajs=e()}(this,function(){"use strict";var t="undefined"!=typeof window,a=Math.round(t&&window.devicePixelRatio||1),o=/(\.[A-z]{3,4}\/?(\?.*)?)$/,u=/url\(('|")?([^)'"]+)('|")?\)/i,i="[data-rjs]",d="data-rjs-processed";function n(t){return Array.prototype.slice.call(t)}function s(e,i){var n=e.nodeName.toLowerCase(),t=document.createElement("img");t.addEventListener("load",function(){var t;"img"===n?(t=e,t.hasAttribute("data-no-resize")||(0===t.offsetWidth&&0===t.offsetHeight?(t.setAttribute("width",t.naturalWidth),t.setAttribute("height",t.naturalHeight)):(t.setAttribute("width",t.offsetWidth),t.setAttribute("height",t.offsetHeight))),t).setAttribute("src",i):e.style.backgroundImage="url("+i+")"}),t.setAttribute("src",i),e.setAttribute(d,!0)}function f(t,e){var i,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,r=(i=parseInt(n,10),a<i?a:i);e&&1<r&&s(t,e.replace(o,"@"+r+"x$1"))}function e(t){var e;(e=t,e?"function"==typeof e.forEach?e:n(e):"undefined"!=typeof document?n(document.querySelectorAll(i)):[]).forEach(function(t){if(!t.getAttribute(d)){var e="img"===t.nodeName.toLowerCase()?t.getAttribute("src"):t.style.backgroundImage.replace(u,"$2"),i=t.getAttribute("data-rjs"),n=!isNaN(parseInt(i,10));if(null===i)return;n?f(t,e,i):(r=t,o=i,1<a&&s(r,o))}var r,o})}return t&&(window.addEventListener("load",function(){e()}),window.retinajs=e),e});