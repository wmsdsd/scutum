!function(H){H.fn.listnav=function(e){var p=H.extend({},H.fn.listnav.defaults,e),g=["_","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","-"],w=!1,x="";return x=null!==document.ontouchstart?"click":"touchend click",p.prefixes=H.map(p.prefixes,function(e){return e.toLowerCase()}),this.each(function(){var t,o,r,d,c,v,e=this.id,u=H(this),h={},i=0,f=!0,C="";function m(e,l,t){/\W/.test(e)&&(e="-"),isNaN(e)||(e="_"),l.addClass("ln-"+e),void 0===h[e]&&(h[e]=0),h[e]++,t||i++}function N(e){return H(e).hasClass("all")?p.dontCount?i-u.find(p.dontCount).length:i:(e=".ln-"+H(e).attr("class").split(" ")[0],void 0!==(v=p.dontCount?u.find(e).not(p.dontCount).length:u.find(e).length)?v:0)}H("#"+e+"-nav").length||H('<div id="'+e+'-nav" class="listNav"/>').insertBefore(u),t=H("#"+e+"-nav"),function(){var i,s,n,a;if(t.append(function(){for(var e=[],l=1;l<g.length;l++)0===e.length&&e.push('<a class="all" href="#">'+p.allText+'</a><a class="_" href="#">0-9</a>'),e.push('<a class="'+g[l]+'" href="#">'+("-"===g[l]?"...":g[l].toUpperCase())+"</a>");return'<div class="ln-letters">'+e.join("")+"</div>"+(p.showCounts?'<div class="ln-letter-count listNavHide">0</div>':"")}()),o=H(".ln-letters",t).slice(0,1),p.showCounts&&(r=H(".ln-letter-count",t).slice(0,1)),n=0<p.prefixes.length,a=0<p.filterSelector.length,H(u).children().each(function(){if(s=H(this),""!==(i=a?H.trim(s.find(p.filterSelector).text()).toLowerCase():H.trim(s.text()).toLowerCase())){if(n){var e=H.map(p.prefixes,function(e){return e.indexOf(" ")<=0?e+" ":e}),l=H.grep(e,function(e){return 0===i.indexOf(e)});if(0<l.length){var t=i.toLowerCase().split(l[0])[1];return void m(null!==t?H.trim(t).charAt(0):i.charAt(0),s,!0)}}m(i.charAt(0),s)}}),u.append('<li class="ln-no-match listNavHide">'+p.noMatchText+"</li>"),p.showCounts&&(t.mouseover(function(){var e;e=r.outerHeight(),r.css({top:H("a:first",t).slice(0,1).position().top-e})}),H(".ln-letters a",t).mouseover(function(){d=H(this).position().left,c=H(this).outerWidth()+"px",v=N(this),r.css({left:d,width:c}).text(v).addClass("letterCountShow").removeClass("listNavHide")}).mouseout(function(){r.addClass("listNavHide").removeClass("letterCountShow")})),H("a",o).on(x,function(e){e.preventDefault();var l=H(this),t=l.attr("class").split(" ")[0],i=u.children(".ln-no-match");if(p.initHidden&&u.children(".ln-init-hidden").remove(),C!==t){if(H("a.ln-selected",o).removeClass("ln-selected"),"all"===t)u.children().addClass("listNavShow").removeClass("listNavHide"),i.addClass("listNavHide").removeClass("listNavShow"),f=!0;else{f?(u.children().addClass("listNavHide").removeClass("listNavShow"),f=!1):""!==C&&u.children(".ln-"+C).addClass("listNavHide").removeClass("listNavShow");var s=N(this);0<s?(u.children(".ln-"+t).addClass("listNavShow").removeClass("listNavHide"),i.addClass("listNavHide").removeClass("listNavShow")):i.addClass("listNavShow").removeClass("listNavHide")}C=t,H.cookie&&null!==p.cookieName&&H.cookie(p.cookieName,t,{expires:999}),l.addClass("ln-selected"),l.blur(),w||null===p.onClick?w=!1:p.onClick(t)}void 0!==p.onAfterFilter&&p.onAfterFilter(t)}),p.flagDisabled&&function(){for(var e=0;e<g.length;e++)void 0===h[g[e]]&&H("."+g[e],o).addClass("ln-disabled")}(),p.includeAll||H(".all",o).remove(),p.includeNums||H("._",o).remove(),p.includeOther||H(".-",o).remove(),p.removeDisabled&&H(".ln-disabled",o).remove(),H(":last",o).addClass("ln-last"),H.cookie&&null!==p.cookieName){var e=H.cookie(p.cookieName);null!=e&&(p.initLetter=e)}if(""!==p.initLetter)w=!0,H("."+p.initLetter.toLowerCase(),o).slice(0,1).trigger("click");else if(p.initHidden)u.append('<li class="ln-init-hidden listNavHide">'+p.initHiddenText+"</li>"),u.children().addClass("listNavHide"),u.children(".ln-init-hidden").removeClass("listNavHide");else if(p.includeAll)H(".all",o).addClass("ln-selected");else for(var l=p.includeNums?0:1;l<g.length;l++)if(0<h[g[l]]){w=!0,H("."+g[l],o).slice(0,1).trigger("click");break}}()})},H.fn.listnav.defaults={initHidden:!1,initHiddenText:"Tap a letter above to view matching items",initLetter:"",includeAll:!0,allText:"All",includeOther:!1,includeNums:!0,flagDisabled:!0,removeDisabled:!1,noMatchText:"No matching entries",showCounts:!0,dontCount:"",cookieName:null,onClick:null,prefixes:[],filterSelector:"",onAfterFilter:null}}(jQuery);